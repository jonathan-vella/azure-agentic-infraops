# Step 4: Governance Constraints - static-webapp-test

> Generated by bicep-plan agent | 2024-12-17  
> Source: Azure Resource Graph query

## Policy Discovery

**Note**: This is a demo environment. In production, the bicep-plan agent queries Azure Resource Graph
for active policy assignments.

### Simulated Policy Check

```kusto
// Query executed against Azure Resource Graph
PolicyResources
| where type == 'microsoft.authorization/policyassignments'
| where properties.scope contains '/subscriptions/{subscription-id}'
| project name, properties.displayName, properties.policyDefinitionId
```

### Detected Policies (Simulated for Demo)

| Policy                           | Effect | Impact on Design                       |
| -------------------------------- | ------ | -------------------------------------- |
| Require HTTPS on Static Web Apps | Deny   | ✅ SWA enforces HTTPS by default       |
| SQL Server Azure AD-only auth    | Deny   | ⚠️ Must use Azure AD auth, no SQL auth |
| Allowed locations                | Deny   | ✅ swedencentral is allowed            |
| Require tags on resources        | Audit  | ⚠️ Must include required tags          |

### Required Tags (from Policy)

```json
{
  "Environment": "dev",
  "ManagedBy": "Bicep",
  "Project": "static-webapp-test",
  "Owner": "DevOps Team"
}
```

---

## Compliance Matrix

| Requirement             | Policy              | Status            |
| ----------------------- | ------------------- | ----------------- |
| HTTPS enforced          | `Require HTTPS`     | ✅ Compliant      |
| Azure AD authentication | `SQL Azure AD-only` | ✅ Planned        |
| Region restriction      | `Allowed locations` | ✅ swedencentral  |
| Resource tagging        | `Require tags`      | ✅ Will implement |
| Public endpoint         | No blocking policy  | ✅ Allowed        |

---

## Implementation Adjustments

Based on governance constraints:

1. **SQL Server**: Use Azure AD-only authentication (no SQL admin password)
2. **Tagging**: Include all required tags in Bicep templates
3. **Naming**: Follow CAF naming conventions

---

_Governance discovery performed by bicep-plan agent. In production, queries actual Azure Policy assignments._
