
digraph AgenticInfraOps {
    // Graph settings
    graph [
        bgcolor="#1a1a2e"
        fontcolor="white"
        fontname="Segoe UI"
        fontsize="16"
        pad="0.5"
        splines="ortho"
        nodesep="0.6"
        ranksep="0.8"
        rankdir="TB"
        dpi="150"
    ]
    
    node [
        fontname="Segoe UI"
        fontsize="11"
        fontcolor="white"
        style="filled,rounded"
        shape="box"
        penwidth="0"
        margin="0.25,0.15"
    ]
    
    edge [
        color="#64748b"
        fontcolor="#94a3b8"
        fontname="Segoe UI"
        fontsize="9"
        penwidth="2"
        arrowsize="0.8"
    ]
    
    // Title (invisible node for spacing)
    title [label="" shape="none" height="0.1"]
    
    // Step 1: Requirements
    subgraph cluster_step1 {
        label="Step 1: Requirements"
        fontcolor="white"
        fontname="Segoe UI Semibold"
        fontsize="12"
        bgcolor="#16213e"
        style="rounded"
        pencolor="#0f3460"
        penwidth="2"
        
        plan [
            label="@plan\n(built-in)"
            fillcolor="#0078D4"
        ]
    }
    
    // Step 2: Architecture
    subgraph cluster_step2 {
        label="Step 2: Architecture"
        fontcolor="white"
        fontname="Segoe UI Semibold"
        fontsize="12"
        bgcolor="#16213e"
        style="rounded"
        pencolor="#0f3460"
        penwidth="2"
        
        architect [
            label="azure-principal-architect\n(NO CODE)"
            fillcolor="#FF6B35"
        ]
    }
    
    // Step 3: Design Artifacts
    subgraph cluster_step3 {
        label="Step 3: Design Artifacts (Optional)"
        fontcolor="#94a3b8"
        fontname="Segoe UI Semibold"
        fontsize="12"
        bgcolor="#16213e"
        style="rounded,dashed"
        pencolor="#0f3460"
        penwidth="2"
        
        diagrams_design [
            label="ðŸ“Š diagram-generator\n(-des)"
            fillcolor="#8b5cf6"
        ]
        
        adr_design [
            label="ðŸ“ adr-generator\n(-des)"
            fillcolor="#14b8a6"
        ]
    }
    
    // Step 4: Planning
    subgraph cluster_step4 {
        label="Step 4: Planning"
        fontcolor="white"
        fontname="Segoe UI Semibold"
        fontsize="12"
        bgcolor="#16213e"
        style="rounded"
        pencolor="#0f3460"
        penwidth="2"
        
        bicep_plan [
            label="bicep-plan\n(plan only)"
            fillcolor="#10b981"
        ]
        
        subgraph cluster_governance {
            label="Governance Discovery"
            fontcolor="#94a3b8"
            fontsize="10"
            bgcolor="#0f3460"
            style="rounded,dashed"
            pencolor="#334155"
            
            policy [
                label="ðŸ”’ Azure Policy\n(constraints)"
                fillcolor="#06b6d4"
            ]
        }
    }
    
    // Step 5: Implementation
    subgraph cluster_step5 {
        label="Step 5: Implementation"
        fontcolor="white"
        fontname="Segoe UI Semibold"
        fontsize="12"
        bgcolor="#16213e"
        style="rounded"
        pencolor="#0f3460"
        penwidth="2"
        
        bicep_implement [
            label="bicep-implement\n(code generation)"
            fillcolor="#ec4899"
        ]
    }
    
    // Step 6: Deploy
    subgraph cluster_step6 {
        label="Step 6: Deploy"
        fontcolor="white"
        fontname="Segoe UI Semibold"
        fontsize="12"
        bgcolor="#16213e"
        style="rounded"
        pencolor="#0f3460"
        penwidth="2"
        
        deploy [
            label="ðŸš€ Deploy\nDeploy Agent"
            fillcolor="#f4722b"
        ]
    }

    // Step 7: As-Built Artifacts
    subgraph cluster_step7 {
        label="Step 7: As-Built Artifacts (Optional)"
        fontcolor="#94a3b8"
        fontname="Segoe UI Semibold"
        fontsize="12"
        bgcolor="#16213e"
        style="rounded,dashed"
        pencolor="#0f3460"
        penwidth="2"
        
        diagrams_asbuilt [
            label="ðŸ“Š diagram-generator\n(-ab)"
            fillcolor="#8b5cf6"
        ]
        
        adr_asbuilt [
            label="ðŸ“ adr-generator\n(-ab)"
            fillcolor="#14b8a6"
        ]
    }
    
    // Main workflow edges
    plan -> architect [xlabel="requirements" color="#0078D4" fontcolor="#0078D4"]
    architect -> diagrams_design [style="dashed" xlabel="optional" color="#FF6B35" fontcolor="#94a3b8"]
    architect -> bicep_plan [xlabel="architecture" color="#FF6B35" fontcolor="#FF6B35"]
    diagrams_design -> bicep_plan [style="dashed" color="#8b5cf6"]
    adr_design -> bicep_plan [style="dashed" color="#14b8a6"]
    policy -> bicep_plan [style="dashed" xlabel="constraints" color="#06b6d4" fontcolor="#06b6d4"]
    bicep_plan -> bicep_implement [xlabel="plan" color="#10b981" fontcolor="#10b981"]
    bicep_implement -> deploy [xlabel="code" color="#ec4899" fontcolor="#ec4899"]
    deploy -> diagrams_asbuilt [style="dashed" xlabel="optional" color="#f4722b" fontcolor="#94a3b8"]
    
    // Layout hints
    {rank=same; plan}
    {rank=same; architect}
    {rank=same; diagrams_design; adr_design}
    {rank=same; bicep_plan; policy}
    {rank=same; bicep_implement}
    {rank=same; diagrams_asbuilt; adr_asbuilt}
}
